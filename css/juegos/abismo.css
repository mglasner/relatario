/* --- El Abismo (platformer) --- */

#pantalla-abismo {
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: center;
    overflow: hidden;
}

.plat-wrapper {
    position: relative;
    display: inline-block;
    max-width: 100%;
}

#canvas-platformer {
    display: block;
    image-rendering: pixelated;
    border: 3px solid var(--juego-borde);
    border-radius: 8px;
    box-shadow:
        inset 0 0 40px rgb(0 0 0 / 60%),
        0 0 15px rgb(0 0 0 / 50%);
    max-width: 100%;
    box-sizing: border-box;
}

/* HUD overlay: barra de vida del boss (texto nítido sobre canvas pixelado) */
.plat-hud-boss {
    position: absolute;
    bottom: 10px;
    left: 50%;
    transform: translateX(-50%);
    text-align: center;
    pointer-events: none;
}

.plat-boss-nombre {
    display: block;
    color: #fff;
    font-family: var(--font-body);
    font-size: 0.65rem;
    font-weight: 600;
    margin-bottom: 3px;
    text-shadow: 0 1px 3px rgb(0 0 0 / 80%);
}

.plat-boss-barra-fondo {
    width: 140px;
    height: 8px;
    background: rgb(0 0 0 / 60%);
    border-radius: 4px;
    border: 1px solid rgb(187 134 252 / 40%);
    overflow: hidden;
}

.plat-boss-barra-vida {
    height: 100%;
    background: #bb86fc;
    border-radius: 3px;
    transition: width 0.2s ease;
}

/* HUD in-canvas: vida del jugador + botón huir (visible solo en landscape mobile) */
.plat-hud-jugador {
    position: absolute;
    top: 8px;
    left: 8px;
    display: none;
    align-items: center;
    gap: 6px;
    pointer-events: auto;
    z-index: 5;
}

.plat-hud-huir {
    width: 28px;
    height: 28px;
    padding: 0;
    border: 1.5px solid rgb(240 165 0 / 40%);
    border-radius: 50%;
    background-color: rgb(0 0 0 / 50%);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    transition:
        border-color 0.2s,
        background-color 0.2s;
}

.plat-hud-huir:active {
    background-color: rgb(240 165 0 / 25%);
    border-color: rgb(240 165 0 / 70%);
}

.plat-hud-huir-icono {
    width: 20px;
    height: 20px;
    object-fit: contain;
    border-radius: 50%;
    pointer-events: none;
}

/* Variante compacta para HUD in-canvas */
.barra-vida-compacta {
    gap: 4px;
    flex: none;
    min-width: 0;
}

.barra-vida-compacta .barra-vida-corazon {
    font-size: 0.65rem;
}

.barra-vida-compacta .barra-vida-fondo {
    width: 80px;
    flex: none;
    height: 12px;
    border-radius: 6px;
    border: 1px solid rgb(94 234 219 / 30%);
    background: rgb(0 0 0 / 60%);
}

.barra-vida-compacta .barra-vida-relleno {
    border-radius: 5px;
}

.barra-vida-compacta .barra-vida-texto {
    font-size: 0.55rem;
}

/* Desactivar shimmer en la variante compacta (muy pequeña) */
.barra-vida-compacta .barra-vida-relleno::after {
    display: none;
}

/* Variante compacta del inventario para HUD in-canvas */
.inventario-compacto {
    gap: 3px;
}

.inventario-compacto .inventario-slot {
    width: 20px;
    height: 20px;
    border-width: 1px;
    border-radius: 4px;
}

/* --- Ajustes landscape para modo inmersivo (mobile) --- */

@media (orientation: landscape) and (pointer: coarse) {
    /* Mostrar HUD in-canvas en landscape mobile */
    .plat-hud-jugador {
        display: flex;
    }
}
